@using _2021_dotnet_e_02.Models.Enums
@model _2021_dotnet_e_02.Models.ActemiumTicket

@{
    ViewData["Title"] = "Comments";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<div class="container">

    <div class="edit-view-model">
        <h2>Comments - @Model.Title</h2>
        <hr />
        @if (Model.Comments.Count == 0)
        {
            <p>This ticket has no comments.</p>
        }
        else
        {
            @*
                <p>As "dl" element - can't seem to decide where to put br\ and remove trailing : </p>
                <dl class="row d-flex justify-content-center align-items-center p-3 text-center">
                    @foreach (var comment in Model.Comments)
                    {
                        <dt class="col-12 col-md-6">
                            @comment.UserRole<br />
                            @comment.User.FirstName @comment.User.LastName<br />
                            @comment.DateTimeOfComment
                        </dt>
                        <dd class="col-12 col-md-6">
                            @comment.CommentText
                        </dd>
                    }

                </dl>
            *@
            <p>
                As "table" element - I prefer this but I'll have to move the css to the right place <br />
                Let me know if this can be done as easily with the "dl" element
            </p>

            @* comments are not sorted when used as Model.Comments *@
            @foreach (var comment in Model.Comments.OrderBy(c => c.DateTimeOfComment).ToList())
            {
                <table style="width: 100%; margin-bottom:15px">
                    <tbody>
                        <tr>
                            <td style="text-align: right;
                                        width:35%;
                                        padding-right: 15px;
                                        font-size: 1rem;
                                        color: #004087;
                                        font-family: 'Source Sans Pro';
                                        height:fit-content();
                                        ">
                                @comment.UserRole
                            </td>
                            <td rowspan="3" style="padding-left:15px; width:65%">@comment.CommentText</td>
                        </tr>
                        <tr>
                            <td style="text-align: right;
                                        width:35%;
                                        padding-right: 15px;
                                        font-size: 1.1rem;
                                        color: #004087;
                                        font-family: 'Source Sans Pro';
                                        font-weight: bold;
                                        ">
                                @comment.User.FirstName @comment.User.LastName
                            </td>
                        </tr>
                        <tr>
                            <td style="text-align: right;
                                        width:35%;
                                        padding-right: 15px;
                                        font-size: 1rem;
                                        font-family: 'Source Sans Pro';
                                        height: fit-content();
                                        ">
                                @comment.DateTimeOfComment.ToShortDateString() - @comment.DateTimeOfComment.ToString("HH:mm:ss")
                            </td>
                        </tr>
                        @*<tr class="justify-content-center align-items-center"><td colspan="2"> - </td></tr>*@
                    </tbody>
                </table>
            }
        }
        <div class="d-flex justify-content-center mb-3">
            <a asp-action="Edit" asp-route-id="@Model.TicketId" class="btn btn-primary mr-3">Add comment</a>
            <a asp-action="Index" class="btn btn-secondary">Back to List</a>
        </div>
    </div>

</div>